# Guide for AI: Navigating LogiDoclet Prolog Output

This document provides instructions for an AI to efficiently understand and interact with the Prolog-based Javadoc output generated by LogiDoclet.

## 1. Output Structure and Format

The Javadoc information is presented as Prolog facts. Each fact represents a specific Java element (e.g., module, class, method, field) and its properties.

## 2. Understanding the Schema (Metadata First!)

Before attempting to parse any Prolog output, **always consult the metadata file**:
*   `java_metastructure.pl`

This file defines all the Prolog predicates used, their arity (number of arguments), and the expected type and meaning of each argument. It is crucial for correctly interpreting the Prolog facts.

**Location of Metadata:** The `java_metastructure.pl` file is copied to the *root* of the output directory (e.g., `target/test-output/java_metastructure.pl`). The `gemini.md` file itself is also copied to this root.

## 3. Step-by-Step Exploration Strategy

To understand a project's structure, follow a hierarchical exploration path:

*   **Start with the Index:** Begin by reading `index.pl` in the root of the output directory (e.g., `[output_dir]/minimal/index.pl` or `[output_dir]/full/index.pl`). This file contains an `index` fact listing all top-level modules.
*   **Explore Modules:** For each module listed in `index.pl`, navigate to its corresponding `module.pl` file (e.g., `[output_dir]/minimal/[module_name]/module.pl`). This file contains the `module` fact with its directives (requires, exports, provides, uses) and, importantly, an `all_packages` argument listing *all* packages contained within that module. Use this `all_packages` list to discover all packages, not just the exported ones.
*   **Discover Packages:** For each package listed in the `all_packages` argument of a module, navigate to its directory (e.g., `[output_dir]/minimal/[module_name]/[package_path]/`). Each package directory contains a `package.pl` file with `package_declaration` facts, listing the types declared within that package.
*   **Analyze Types:** For each type (class, interface, enum, record, annotation_type) listed in a `package.pl` file, navigate to its dedicated `.pl` file (e.g., `[output_dir]/minimal/[package_path]/[TypeName].pl`). These files contain detailed facts about the type's modifiers, type parameters, inheritance, members (fields, methods, constructors), and annotations.

## 4. Minimal vs. Full Output Modes

LogiDoclet generates two versions of the Prolog output, controlled by the `-outputCommentary` flag during generation:

*   **Minimal Version (Default):** Located in `[output_dir]/minimal/`. This version contains only the structural information of the Java code. Javadoc comments are represented as empty strings (`""`) in the `doc_comment` argument of predicates. Use this for a quick, token-efficient overview of the codebase structure.
*   **Full Version:** Located in `[output_dir]/full/`. This version includes all Javadoc comments extracted from the source code, with line breaks escaped as `\n`. Use this version when a deeper understanding of the code's intent, usage, and detailed documentation is required.

**Strategy for AI:**
*   Always start with the **Minimal Version** to get a high-level understanding and navigate the codebase efficiently.
*   Switch to the **Full Version** for specific classes, methods, or fields when detailed documentation is needed for a particular task (e.g., explaining a method, generating new code, or refactoring).

## 5. Handling Undefined Types in Metadata

Any type referenced in `argument_info` that is *not* explicitly defined by a `predicate_info` fact within `java_metastructure.pl` should be considered an **atomic type** (e.g., `atom`, `string`, `integer`, `float`).
